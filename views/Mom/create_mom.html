<section class="content">
    <style>
        .select2-container {
            width: 100% !important;
        }

        .select2-container--default .select2-selection--multiple {
            border: 1px solid #ccc !important;
            border-radius: 0px !important;
        }

        @media (max-width: 1200px) {
            #addMoMButton {
                margin-top: 0% !important;
            }
        }
    </style>
    <!-- Suvrat Change position of breadcrumb -->
    <div class="col-md-12 col-sm-12 col-xs-12">
        <ol id="breadcrumb" class="ab-nav breadcrumb">
            <i class="glyphicon glyphicon-home"></i>&nbsp;
            <li ng-repeat="breadcrumb in breadcrumbs.get() track by breadcrumb.label" ng-class="{ active: $last }">
                <a ng-if="!$last" ng-href="{{ breadcrumb.path }}" ng-bind="breadcrumb.label"
                    class="margin-right-xs"></a>
                <span ng-if="$last" ng-bind="breadcrumb.label"></span>
            </li>
        </ol>
    </div>
    <br><br>
    <!-- Add MoM form -->
    <div class="box box-default">
        <form id="momAddForm" role="form" name="momAddForm">
            <div class="row boxhead box-header with-border boxhead">
                <div class="col-md-6 ">
                    <div class="">
                        <h1 class="formheading">
                            <b>{{title}}</b>
                        </h1>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="pull-right" style="margin-right: 10px;">
                        <a class="back" ng-href="mom/mom-list"><button type="button" class="btn btn-default btn-sm "
                                data-toggle="modal" title="Back" data-target="" data-ng-click=""
                                style="border:white;color:#428bca;"><i class="fa fa-arrow-left"
                                    aria-hidden="true"></i></button></a>
                    </div>
                </div>
            </div>
            <div class="box-body">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="momTitle">Meeting Title</label>
                            <input type="text" class="form-control" id="momTitle" name="momTitle" ng-model="momTitle"
                                placeholder="Enter Meeting Title">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="momUser">Meeting Called By</label>
                            <select id="momUser" name="momUser" class="form-control s2mn" ng-model="momUser"
                                data-placeholder="Select User">
                                <option value="" ng-disabled="">Select User </option>
                                <option ng-repeat="x in userList" value="{{x.id}}">{{x.name}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="momKeyword">Keywords</label>
                            <input type="text" class="form-control" id="momKeyword" name="momKeyword"
                                ng-model="momKeyword" placeholder="Enter Keyword">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="momName">Projects</label>
                            <select id="momName" name="momName" class="form-control s2mn" ng-model="momName"
                                data-placeholder="Select Project" multiple="multiple">
                                <option value="" ng-disabled="">Select Projects </option>
                                <option ng-repeat="x in projectList" value="{{x.id}}">{{x.name}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="momDate">Date</label>
                            <div class="input-group date">
                                <input type="text" class="form-control" id="momDate" name="momDate" ng-model="momDate"
                                    placeholder="Enter Date" readonly='true'
                                    style="cursor:default;background-color: white;height:32px;">
                                <div class="input-group-addon">
                                    <span class="fa fa-calendar"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="momClient">Client Name</label>
                            <select id="momClient" name="momClient" class="form-control s2mn" ng-model="momClient"
                                data-placeholder="Select Client Name" multiple="multiple">
                                <option value="" ng-disabled="">Select Client Name </option>
                                <option ng-repeat="x in clientList | unique:'name'" value="{{x.name}}">{{x.name}}
                                </option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="startTime">Start Time</label>
                            <div class="input-group bootstrap-timepicker timepicker">
                                <input id="momStartTime" name="momStartTime" type="text" class="form-control"
                                    ng-model="momStartTime" placeholder="Enter Start Time"
                                    ng-change="calculateMeetingTimeDuration(momDate,momStartTime,momEndTime);">
                                <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="endTime">End Time</label>
                            <div class="input-group bootstrap-timepicker timepicker">
                                <input id="momEndTime" name="momEndTime" type="text" class="form-control"
                                    ng-model="momEndTime" placeholder="Enter End Time"
                                    ng-change="calculateMeetingTimeDuration(momDate,momStartTime,momEndTime);"
                                    style="border-color: {{highlightcolor2}};">
                                <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
                            </div>
                            <span style="color:#dd4b39;border-color:#dd4b39">{{errMessage2}}</span>
                        </div>
                    </div>
                    <div class="col-md-4" style="margin-top: 4px;">
                        <div class="form-group">
                            <label class="" for="timeDuration">Duration</label>
                            <input type="text" class="form-control" id="duration" name="duration"
                                placeholder="0 Hrs 0 minutes" disabled="" ng-model="timeDuration">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="momVenue">Meeting Venue</label>
                            <input type="text" class="form-control" id="momVenue" name="momVenue" ng-model="momVenue"
                                placeholder="Enter Meeting Venue">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="momStatus">Status</label>
                            <select id="momStatus" name="momStatus" class="form-control s2mn" ng-model="momStatus"
                                data-placeholder="Select Status" ng-options="x.name as x.name for x in statusList">
                                <option value="">Select status</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="attendees">List Of Attendees:</label>
                            <select id="attendees" name="attendees" class="form-control s2mn"
                                ng-change="getListOfAttendees(attendees)" ng-model="attendees"
                                data-placeholder="Select Attendees" multiple="multiple">
                                <option value="" ng-disabled="">Select Attendees </option>
                                <option ng-repeat="x in userList" value="{{x}}">{{x.name}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="mandatory" for="momDesc">Description</label>
                            <textarea rows="2" class="form-control" id="momDesc" name="momDesc" ng-model="momDesc"
                                splaceholder="Enter Description"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <!-- Add MoM Task Form -->
        <form id="momAddTaskForm" role="form" name="momAddTaskForm">
            <div class="row boxhead box-header with-border boxhead">
                <div class="col-md-6 ">
                    <div class="">
                        <h1 class="formheading">
                            <b> Add Task</b>
                        </h1>
                    </div>
                </div>
            </div>
            <div class="box-body">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="taskName">Name</label>
                            <input type="text" class="form-control" id="taskName" name="taskName"
                                ng-model="taskForm.taskName" placeholder="Enter Task Name">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="taskType">Type</label>
                            <input type="text" class="form-control" id="taskType" name="taskType"
                                ng-model="taskForm.taskType" placeholder="Enter Type">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="taskUser">Assigned To</label>
                            <select id="taskUser" ng-model="taskForm.taskUser" name="taskUser" class="form-control"
                                data-placeholder="Select User" ng-options="x.id as x.name for x in attendeesList">
                                <option value="" ng-disabled="">Select User </option>
                                <!-- <option ng-repeat="x in attendeesList" value={{x.id}} >{{x.name}}</option> -->
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label class="mandatory" for="taskDesc">Description</label>
                            <textarea class="form-control" id="taskDesc" name="taskDesc" ng-model="taskForm.taskDesc"
                                placeholder="Enter Description"></textarea>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <!-- <div class="col-md-3"> -->
                    <!-- <div class="form-group">
                            <label class="mandatory" for="taskStatus">Status</label>
                            <select id="taskStatus" name="taskStatus" class="form-control s2mn" ng-model="taskStatus" data-placeholder="Enter Status" ng-options="x.name as x.name for x in statusList">
                                <option value="">Select project status</option>
                                <option ng-repeat="x in statusList" value="{{x.name}}" >{{x.name}}</option>
                            </select>
                        </div> -->
                    <!-- </div> -->
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="taskStartDate">Start Date</label>
                            <div class="input-group date">
                                <input type="text" class="form-control" id="taskStartDate" name="taskStartDate"
                                    ng-model="taskForm.taskStartDate" placeholder="Start Date" readonly='true'
                                    style="cursor:default;background-color: white;">
                                <div class="input-group-addon">
                                    <span class="fa fa-calendar"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="mandatory" for="taskEndDate">End Date</label>
                            <div class="input-group date">
                                <input type="text" class="form-control" id="taskEndDate" name="taskEndDate"
                                    ng-model="taskForm.taskEndDate" placeholder="End Date" readonly='true'
                                    style="cursor:default;background-color: white;">
                                <div class="input-group-addon">
                                    <span class="fa fa-calendar"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-1" id="addMoMButton" style="margin-top: 2.5%;">
                        <div class="form-group">
                            <input type="button" value="Add" class="btn btn-primary form-control"
                                data-ng-click="addMoMTask()">
                        </div>
                    </div>
                </div>
                <br>
                <!--Add task table section-->
                <div class="row">
                    <div class="col-md-12 table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th style="text-align: center; width: 10%">Sr No.</th>
                                    <th style="width: 30%">Name</th>
                                    <th style="width: 20%">Type</th>
                                    <th style="width: 20%">Assigned</th>
                                    <th style="width: 20%;text-align: center;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="data in taskArray">
                                    <td style="text-align: center;">{{$index + 1}}</td>
                                    <td>{{data.name}}</td>
                                    <td>{{data.type}}</td>
                                    <td>{{data.user_name}}</td>
                                    <td style="text-align: center;">
                                        <button type="button" class="btn btn-default btn-xs" title="View"
                                            ng-click="viewTask(data,'add');"
                                            style="border-color: #fff!important;text-align: center;"><i
                                                class="fa fa-eye" aria-hidden="true"
                                                style="color:#428bca;"></i></button>

                                        <button type="button" class="btn btn-default btn-xs" title="Edit"
                                            ng-click="editTask(data,$index);resetEditModalForm();"
                                            style="border-color: #fff!important;text-align: center;"><i
                                                class="fa fa-edit" aria-hidden="true"
                                                style="color:#428bca;"></i></button>

                                        <button type="button" class="btn btn-default btn-xs" title="Remove"
                                            style="border-color: #fff!important;text-align: center;"
                                            ng-click="deleteTask($index);"><i class="fa fa-times" aria-hidden="true"
                                                style="color:#428bca;"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </form>
        <div class="box-footer">
            <div class="pull pull-right">
                <input type="button" value="Save" data-ng-click="saveMoM()" class="btn btn-success"
                    ng-disabled="submitClicked" />
                <input ng-if="title == 'Add New MoM'" type="reset" value="Reset" ng-click="resetForm()"
                    class="btn btn-warning" />
            </div>
        </div>
    </div>
    <!-- Modal for Viewing task -->
    <div class="modal fade" id="showTaskModal" role="dialog">
        <div class="modal-dialog modal-md">
            <form class="form-horizontal" role="form" id="momAddTaskForm">
                <div class="modal-content" style="border-radius: 0px!important;">
                    <div class="modal-header" style="text-align:center;">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">View Task</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="col-md-3 control-label" for="">Name</label>
                            <div class="col-md-9">
                                <input type="text" class="form-control pull-right" id="taskName" name="taskName"
                                    ng-model="taskForm.taskNamee" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-md-3 control-label">Type</label>
                            <div class="col-md-9">
                                <input type="text" class="form-control pull-right" id="taskType" name="taskType"
                                    ng-model="taskForm.taskTypee" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label" for="">Assigned To</label>
                            <div class="col-md-9">
                                <input type="text" class="form-control pull-right" id="taskUserv" name="taskUserv"
                                    ng-model="taskForm.userNamee" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label" for="">Description</label>
                            <div class="col-md-9">
                                <textarea class="form-control pull-right" id="taskDesc" name="taskDesc"
                                    ng-model="taskForm.taskDesce" disabled="disabled">
                                </textarea>
                            </div>
                        </div>
                        <!-- <div class="form-group">
                            <label class="col-md-3 control-label" for="taskStatus">Status</label>
                            <div class="col-md-9">
                            <select id="taskStatus" name="taskStatus" class="form-control" ng-model="taskForm.taskStatuse" disabled="disabled">
                                <option value="">Select project status</option>
                                <option ng-repeat="x in statusList" value="{{x.name}}" >{{x.name}}</option>
                            </select>
                            </div>
                        </div> -->
                        <div class="form-group">
                            <label class="col-md-3 control-label" for="">Start Date</label>
                            <div class="col-md-9">
                                <input type="text" class="form-control pull-right" id="taskStartDate_v"
                                    name="taskStartDate_v" ng-model="taskForm.taskStartDatee" disabled="disabled">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label" for="">End Date</label>
                            <div class="col-md-9">
                                <input type="text" class="form-control pull-right" id="taskEndDate_v"
                                    name="taskEndDate_v" ng-model="taskForm.taskEndDatee" disabled="disabled">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer" style="margin-top:0px">
                        <button type="button" class="btn btn-warning" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!-- End of Modal for Viewing task -->

    <!-- Modal for editing task -->
    <div class="modal fade" id="editTaskModal" role="dialog">
        <div class="modal-dialog modal-md">
            <form class="form-horizontal" role="form" id="momModalAddTaskForm">
                <div class="modal-content" style="border-radius: 0px!important;">
                    <div class="modal-header" style="text-align:center;">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Edit Task</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="col-md-3 control-label mandatory" for="">Name</label>
                            <div class="col-md-9">
                                <input type="text" class="form-control pull-right" id="taskName" name="taskName"
                                    ng-model="taskForm.taskNamee" placeholder="Enter Task Name">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="" class="col-md-3 control-label mandatory">Type</label>
                            <div class="col-md-9">
                                <input type="text" class="form-control pull-right" id="taskType" name="taskType"
                                    ng-model="taskForm.taskTypee" placeholder="Enter Type">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label mandatory" for="">Assigned To</label>
                            <div class="col-md-9">
                                <select id="taskUsere" ng-model="taskForm.taskUsere" name="taskUsere"
                                    class="form-control" data-placeholder="Select User"
                                    ng-options="x.id as x.name for x in attendeesList">
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label mandatory" for="">Description</label>
                            <div class="col-md-9">
                                <textarea class="form-control pull-right" id="taskDesc" name="taskDesc"
                                    ng-model="taskForm.taskDesce" placeholder="Enter Description">
                                </textarea>
                            </div>
                        </div>
                        <!-- <div class="form-group">
                            <label class="col-md-3 control-label mandatory" for="taskStatus">Status</label>
                            <div class="col-md-9">
                                <select id="taskStatus" name="taskStatus" class="form-control" ng-model="taskForm.taskStatuse">
                                <option value="">Select project status</option>
                                <option ng-repeat="x in statusList" value="{{x.name}}" >{{x.name}}</option>
                            </select>
                            </div>
                        </div> -->
                        <div class="form-group">
                            <label class="col-md-3 control-label mandatory" for="">Start Date</label>
                            <div class="col-md-9">
                                <div class="input-group date">
                                    <input type="text" class="form-control pull-right" id="editTaskStartDate"
                                        name="editTaskStartDate" ng-model="taskForm.taskStartDatee"
                                        placeholder="Enter Start Date" readonly='true'
                                        style="cursor:default;background-color: white;">
                                    <div class="input-group-addon">
                                        <span class="fa fa-calendar"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label mandatory" for="">End Date</label>
                            <div class="col-md-9">
                                <div class="input-group date">
                                    <input type="text" class="form-control pull-right" id="editTaskEndDate"
                                        name="editTaskEndDate" ng-model="taskForm.taskEndDatee"
                                        placeholder="Enter End Date" readonly='true'
                                        style="cursor:default;background-color: white;">
                                    <div class="input-group-addon">
                                        <span class="fa fa-calendar"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer" style="margin-top:0px">
                        <button data-ng-click="saveModalTask()" class="btn btn-primary"> Save</button>
                        <button type="button" class="btn btn-warning" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!-- End of Modal for editing task -->
</section>

<script type="text/javascript">
    $(function () {
        $(".s2mn").on("change", function () { $(this).valid(); });
        $("#taskUser").on("change", function () {
            $(this).valid();
        });
        //$(".select2").select2();
        $("#momName").select2();
        // $("#taskUser").select2();
        $("#taskUser1").select2();
        $("#attendees").select2();
        $("#momClient").select2({
            tags: true
        });
        $('#momUser').select2();
        $('#momStatus').select2();
        // $("#taskStatus").select2();

        $('#taskStartDate').datepicker({
            autoclose: true,
            format: 'dd/mm/yyyy'
        }).on("changeDate", function () {
            $(this).valid();
            var selected = $(this).val();
            $('#taskEndDate').datepicker('setStartDate', selected);
        });

        $('#taskEndDate').datepicker({
            autoclose: true,
            format: 'dd/mm/yyyy'
        }).on('changeDate', function (e) {
            $(this).valid();
        });

        $('#editTaskStartDate').datepicker({
            autoclose: true,
            format: 'dd/mm/yyyy'
        }).on("changeDate", function () {
            $(this).valid();
            var selected = $(this).val();
            $('#editTaskEndDate').datepicker('setStartDate', selected);
        });

        $('#editTaskEndDate').datepicker({
            autoclose: true,
            format: 'dd/mm/yyyy',
            altField: "#idTourDateDetailsHidden",
        }).on('changeDate', function (e) {
            $(this).valid();
        });

        $('#momDate').datepicker({
            format: 'dd/mm/yyyy',
            setDate: new Date(),
            startDate: '-7d',
            autoclose: true,
        }).on('changeDate', function (e) {
            $(this).valid();
        });

        $('#momStartTime').timepicker({
            showInputs: false,
            autoclose: true,
            showMeridian: false,

        });


        $('#momEndTime').timepicker({
            showInputs: false,
            autoclose: true,
            showMeridian: false
        });
    });

    $("#momAddForm").validate({
        errorElement: 'span', //default input error message container
        errorClass: 'help-block help-block-error',
        errorPlacement: function (error, element) {
            var type = $(element).attr("type");
            if ($(element).attr("id") === "momName" || $(element).attr("id") === "momUser" || $(element).attr("id") === "momClient" || $(element).attr("id") === "attendees") {
                // custom placement
                element.parent().append(error);
            } else if ($(element).attr("id") === "momStatus") {
                // custom placement
                element.parent().append(error);
            } else if ($(element).attr("id") === "momDate") {
                // custom placement
                element.parent().parent().append(error);
            } else if ($(element).attr("id") === "momStartTime") {
                // custom placement
                element.parent().parent().append(error);
            } else if ($(element).attr("id") === "momEndTime") {
                // custom placement
                element.parent().parent().append(error);
            } else {
                error.insertAfter(element);
            }
        },
        focusInvalid: true, // set focus the last invalid input
        ignore: [], // validate all fields including form hidden input
        rules: {
            momTitle: {
                required: true
            },
            momName: {
                required: true
            },
            momUser: {
                required: true
            },
            momKeyword: {
                required: true
            },
            momVenue: {
                required: true
            },
            momDate: {
                required: true
            },
            momClient: {
                required: true
            },
            momStartTime: {
                required: true
            },
            momEndTime: {
                required: true
            },
            momStatus: {
                required: true
            },
            momDesc: {
                required: true
            },
            attendees: {
                required: true
            }
        },
        messages: {
            momTitle: {
                required: "MoM Title is required."
            },
            momName: {
                required: "Project name is required."
            },
            momUser: {
                required: "MoM user name is required."
            },
            momKeyword: {
                required: "MoM keyword is required."
            },
            momVenue: {
                required: "MoM venue is required."
            },
            momDate: {
                required: "MoM date is required."
            },
            momClient: {
                required: "MoM client name is required."
            },
            momStartTime: {
                required: "Start time is required."
            },
            momEndTime: {
                required: "End time is required."
            },
            momStatus: {
                required: "MoM status is required."
            },
            momDesc: {
                required: "Description is required."
            },
            attendees: {
                required: "Attendees is required."
            }
        },

        highlight: function (element) { // hightlight error inputs
            $(element).closest('.form-group').addClass('has-error');
            $(element).next().children().children().attr('style', 'border-color:#dd4b39!important');
            // set error class to the control group
        },
        unhighlight: function (element) { // revert the change done by hightlight
            $(element).closest('.form-group').removeClass('has-error');
            $(element).next().children().children().attr('style', 'border-color:'); // set error class to the control group
        },
        success: function (label) {
            label.closest('.form-group').removeClass('has-error'); // set success class to the control group
        }
    });

    $("#momAddTaskForm").validate({
        errorElement: 'span', //default input error message container
        errorClass: 'help-block help-block-error',
        errorPlacement: function (error, element) {
            var type = $(element).attr("type");
            if ($(element).attr("id") === "taskUser" || $(element).attr("id") === "taskStatus") {
                // custom placement
                element.parent().append(error);
            } else if ($(element).attr("id") === "taskStartDate") {
                // custom placement
                element.parent().parent().append(error);
            } else if ($(element).attr("id") === "taskEndDate") {
                // custom placement
                element.parent().parent().append(error);
            } else {
                error.insertAfter(element);
            }
        },
        focusInvalid: true, // set focus the last invalid input
        ignore: [], // validate all fields including form hidden input
        rules: {
            taskName: {
                required: true
            },
            taskType: {
                required: true
            },
            taskUser: {
                required: true
            },
            taskDesc: {
                required: true
            },
            taskStatus: {
                required: true
            },
            taskStartDate: {
                required: true
            },
            taskEndDate: {
                required: true
            }
        },
        messages: {
            taskName: {
                required: "MoM task name is required."
            },
            taskType: {
                required: "MoM type name is required."
            },
            taskUser: {
                required: "MoM users name is required."
            },
            taskDesc: {
                required: "MoM description is required."
            },
            taskStatus: {
                required: "MoM status is required."
            },
            taskStartDate: {
                required: "Task start date is required."
            },
            taskEndDate: {
                required: "Task end date is required."
            }
        },
        highlight: function (element) { // hightlight error inputs
            $(element).closest('.form-group').addClass('has-error');
            $(element).next().children().children().attr('style', 'border-color:#dd4b39!important');
            // set error class to the control group
        },
        unhighlight: function (element) { // revert the change done by hightlight
            $(element).closest('.form-group').removeClass('has-error');
            $(element).next().children().attr('style', 'border-color: #dd4b39!important'); // set error class to the control group
        },
        success: function (label) {
            label.closest('.form-group').removeClass('has-error'); // set success class to the control group
        }
    });

    $("#momModalAddTaskForm").validate({
        errorElement: 'span', //default input error message container
        errorClass: 'help-block help-block-error',
        errorPlacement: function (error, element) {

            var type = $(element).attr("type");
            if ($(element).attr("id") === "taskUser" || $(element).attr("id") === "taskStatus") {
                // custom placement
                element.parent().append(error);
            } else if ($(element).attr("id") === "editTaskStartDate") {
                // custom placement
                element.parent().parent().append(error);
            } else if ($(element).attr("id") === "editTaskEndDate") {
                // custom placement
                element.parent().parent().append(error);
            } else {
                error.insertAfter(element);
            }
        },
        focusInvalid: true, // set focus the last invalid input
        ignore: [], // validate all fields including form hidden input
        rules: {
            taskName: {
                required: true
            },
            taskType: {
                required: true
            },
            taskUser: {
                required: true
            },
            taskDesc: {
                required: true
            },
            taskStatus: {
                required: true
            },
            editTaskStartDate: {
                required: true
            },
            editTaskEndDate: {
                required: true
            }
        },
        messages: {
            taskName: {
                required: "MoM task name is required."
            },
            taskType: {
                required: "MoM type name is required."
            },
            taskUser: {
                required: "MoM users name is required."
            },
            taskDesc: {
                required: "MoM description is required."
            },
            taskStatus: {
                required: "MoM status is required."
            },
            editTaskStartDate: {
                required: "Task start date is required."
            },
            editTaskEndDate: {
                required: "Task end date is required."
            }
        },
        highlight: function (element) { // hightlight error inputs
            $(element).closest('.form-group').addClass('has-error');
            $(element).next().children().children().attr('style', 'border-color:#dd4b39!important');
            // set error class to the control group
        },
        unhighlight: function (element) { // revert the change done by hightlight
            $(element).closest('.form-group').removeClass('has-error');
            $(element).next().children().children().attr('style', 'border-color: #dd4b39!important'); // set error class to the control group
        },
        success: function (label) {
            label.closest('.form-group').removeClass('has-error'); // set success class to the control group
        }
    });

    function setCSS() {
        if ($('.modal').is(':visible') == true) {
            $('header').css('z-index', '900');
            $('footer').css('z-index', '900');
        } else {
            $('header').css('z-index', '1053');
            $('footer').css('z-index', '1053');
        }
    }
    setCSS();
</script>

<!-- Suvrat Issue#3159 -->
<script>
    $('#momDate').bind('keydown', function (e) {
        if (e.which == 13) //13 is Enter/Return key.
            e.stopImmediatePropagation();
    }).datepicker({
        autoclose: true,
        todayHighlight: true
    });
    $('#taskStartDate').bind('keydown', function (e) {
        if (e.which == 13) //13 is Enter/Return key.
            e.stopImmediatePropagation();
    }).datepicker({
        autoclose: true,
        todayHighlight: true
    });
    $('#taskEndDate').bind('keydown', function (e) {
        if (e.which == 13) //13 is Enter/Return key.
            e.stopImmediatePropagation();
    }).datepicker({
        autoclose: true,
        todayHighlight: true
    });
    $('#taskStartDate_v').bind('keydown', function (e) {
        if (e.which == 13) //13 is Enter/Return key.
            e.stopImmediatePropagation();
    }).datepicker({
        autoclose: true,
        todayHighlight: true
    });
    $('#taskEndDate_v').bind('keydown', function (e) {
        if (e.which == 13) //13 is Enter/Return key.
            e.stopImmediatePropagation();
    }).datepicker({
        autoclose: true,
        todayHighlight: true
    });
    $('#editTaskStartDate').bind('keydown', function (e) {
        if (e.which == 13) //13 is Enter/Return key.
            e.stopImmediatePropagation();
    }).datepicker({
        autoclose: true,
        todayHighlight: true
    });
    $('#editTaskEndDate').bind('keydown', function (e) {
        if (e.which == 13) //13 is Enter/Return key.
            e.stopImmediatePropagation();
    }).datepicker({
        autoclose: true,
        todayHighlight: true
    });
</script>